<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Qintal Market Intelligence</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<header class="page-header">
  <div class="container">
    <h1>Qintal Market Intelligence</h1>
    <p class="meta-text">Global Stock Research & Intelligence</p>
  </div>
</header>

<main class="content">
  <section class="card">
    <h2>Recent Research</h2>
    <ul id="researchList"></ul>
  </section>
</main>

<script type="module">
import { supabase } from "./js/supabase.js";

// AUTH CHECK
const { data: { user } } = await supabase.auth.getUser();
if (!user) {
  window.location.href = "login.html";
}

// LOAD DATA
const { data } = await supabase
  .from("research")
  .select("company, ticker")
  .order("created_at", { ascending: false })
  .limit(10);

const list = document.getElementById("researchList");
data.forEach(r => {
  list.innerHTML += `
    <li>
      <a href="stock.html?ticker=${r.ticker}">
        ${r.company} (${r.ticker})
      </a>
    </li>`;
});
</script>

</body>
</html>
